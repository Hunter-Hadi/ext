<!DOCTYPE html>
<html lang='en'>
<head>
  <meta charset='UTF-8'>
  <script src='https://unpkg.com/art-template@4.13.2/lib/template-web.js'></script>
</head>
<body>
<script>
console.log('ready');
(function() {
    "use strict";
    window.addEventListener("message", (originalEvent) => {
      const {data = {}, event} = originalEvent.data
      if (event === 'renderTemplate') {
        try {
          const result = template.render(data.template || '',data.variables || {})
          debugger
          originalEvent.source.postMessage({
            taskId: data.taskId,
            data: result,
            error: null,
            success: true
          }, originalEvent.origin)
        } catch (e) {
          debugger
          originalEvent.source.postMessage({
            taskId: data.taskId,
            data: null,
            error: 'renderTemplate error',
            success: false
          }, originalEvent.origin)
        }
      }
    });
  })();
</script>
</body>
</html>
